(self["webpackChunk_1kx_sourceCode"]=self["webpackChunk_1kx_sourceCode"]||[]).push([[130],{61831:function(e){e.exports={container:"container___12ARh",info:"info___1y4cK",chart:"chart___1QoQ5"}},80719:function(e){e.exports={search_wrap:"search_wrap___3CnXX",btn:"btn___2MLeG",icon:"icon___3Lteq",table:"table___1srAK",alignRight:"alignRight___1Gnt_",alignLeft:"alignLeft___1FBK2",td1:"td1___3_fLX",td2:"td2___1faR-",td3:"td3___1J30I",green:"green___KLlDV",red:"red___154Yf",desc:"desc___3TnBO",icon_wrap:"icon_wrap___3ysuA",icon_osd:"icon_osd___3NHxg",symbol:"symbol___3JfPo",no:"no___3mLit",full_name:"full_name___1efIu",action:"action___1ro7P",lprate:"lprate___2uTrP",token:"token___3RTGO",info:"info___1TeBS",title:"title___pfhbb",container:"container___3GRav",layer_top:"layer_top___1cgoM",menu:"menu___Zkrm7",menu_item:"menu_item___1hkCQ",menu_current_item:"menu_current_item___PGR3E",line:"line___3K1ER",borrowed_token:"borrowed_token___QqYIV",borrowed_icon:"borrowed_icon___YM7pb",borrowed_amount:"borrowed_amount___3qfmv"}},35690:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return V}});var a=s(61831),t=s.n(a),r=s(3786),i=s(8870),l=s(2824),o=s(80719),d=s.n(o),c=s(86914),u=s(67294),_=s(55902),x=s(96427),m=(s(55250),s(52060)),h=s(39428),v=s(3182),p=s(3150),j=s(73167),g=s(78129),Z=s(905),b=s(5977),k=s(19159),f=s(3987),w=s(56804),y=s(48521),N=(0,p.l$)();function I(e){var n=(0,b.TH)(),s=n.query,a="iPhone"===N||"Android"===N,t=e.walletChainId,r=e.tokenDatas,i=e.dataSourceChainId,o=e.isLogin,_=e.list,x=e.loading,I=(0,u.useState)({}),F=(0,l.Z)(I,2),B=F[0],S=F[1],D=(0,u.useState)([]),C=(0,l.Z)(D,2),A=C[0],P=C[1],L=(0,u.useState)("undefined"===typeof s.showBorrow?-1:parseInt(s.showBorrow)),T=(0,l.Z)(L,2),q=T[0],R=T[1],E=o&&i===t,$=function(){var e=(0,v.Z)((0,h.Z)().mark((function e(n,s){return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:S(s),R(n);case 2:case"end":return e.stop()}}),e)})));return function(n,s){return e.apply(this,arguments)}}();(0,u.useEffect)((()=>{_&&_.length>0&&P(_.filter((e=>parseFloat(e.userDebt)>0||e.userTotalCol>0)))}),[_]);var K=[{title:"".concat((0,c.Z)("collateral"),"/").concat((0,c.Z)("value")),dataIndex:"collateral_type",key:"collateral_type",align:"left",render:(e,n)=>{var s=n.positions.collaterals,a=[],t=[];s.map((e=>{var n=e.amount,s=e.token,i=(0,p.xD)(s,r);a.push({token:i,amount:(0,p.gB)(n.toString(),i.tokenDecimal)}),t.push(i.icon?(0,y.jsx)("img",{src:i.icon,className:d().icon},s):(0,y.jsx)(k.Z,{tokenId:s},s))}));var i=(0,p.B2)(a);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:d().icon_wrap,children:t}),(0,y.jsx)("div",{children:(0,y.jsx)(f.Z,{value:i,prefix:"$",useAbbr:!0})})]})}},{title:(0,c.Z)("borrowed"),dataIndex:"borrowed",key:"borrowed",align:"right",render:(e,n)=>{var s=n.userDebt,a=n.symbol,t=n.icon,r=n.tokenId,i=(0,p.B2)([{amount:s,token:n}]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:d().borrowed_token,children:[(0,y.jsx)("div",{className:d().borrowed_icon,children:t?(0,y.jsx)("img",{src:t,className:d().icon,style:{width:15,height:15}}):(0,y.jsx)(k.Z,{tokenId:r,size:15})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:d().borrowed_amount,children:(0,y.jsx)(f.Z,{value:s,useAbbr:!0,suffix:a})}),(0,y.jsx)("div",{className:d().desc,children:(0,y.jsx)(f.Z,{value:i,prefix:"$",useAbbr:!0})})]})]})})}},{title:(0,c.Z)("apr"),dataIndex:"apr",key:"apr",align:"right",render:(e,n)=>{var s=n.assets,a="0";return s.interestRate&&(a=s?new Z.Z(s.interestRate.toString()).minus(1e4).div(100).toString():"0"),"".concat(a,"%")}},{title:(0,y.jsxs)(y.Fragment,{children:[(0,c.Z)("risk_factor"),(0,y.jsx)("br",{}),(0,c.Z)("liq_rf")]}),dataIndex:"liq",key:"liq",align:"right",render:(e,n)=>{var s=n.positions,a=n.userDebt,t=s.collaterals,i=new Z.Z(0);t.forEach((e=>{var n=e.token,s=e.amount,a=(0,p.xD)(n,r),t=a.userBorrowPrice,l=a.assets,o=a.tokenDecimal,d=(0,p.gB)(s.toString(),o);i=i.plus(new Z.Z(d).multipliedBy(t).multipliedBy(l.collateralCredit))})),i=parseFloat(a)<=0?i.gt(0)?new Z.Z(1/0):new Z.Z(0):i.div(a).div(n.userBorrowPrice).div(n.assets.borrowCredit);var l="#00A980";return i.lte(1.05)?l="#EB5757":i.lte(1.1)&&(l=" #F2994A"),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{style:{color:l},children:"Infinity"===i.toString()?"--":i.toFixed(2)}),(0,y.jsx)("div",{className:d().line,children:"1.00"})]})}},{title:"".concat((0,c.Z)("add_coll"),"/").concat((0,c.Z)("repay")),dataIndex:"repay",key:"repay",align:"center",render:(e,n)=>E?(0,y.jsxs)("div",{className:d().action,children:[parseFloat(n.userUpdatedAt)>0&&(0,y.jsx)(j.A,{setShowPanelIndex:e=>$(e,n),txt:(0,c.Z)("edit")}),parseFloat(n.userDebt)>0&&(0,y.jsx)(j.b,{setShowPanelIndex:e=>$(e,n)})]}):null}],z=[{title:"".concat((0,c.Z)("collateral"),"/").concat((0,c.Z)("value")),dataIndex:"collateral_type",key:"collateral_type",align:"left",render:(e,n)=>{var s=n.positions.collaterals,a=[],t=[];s.map((e=>{var n=e.amount,s=e.token,i=(0,p.xD)(s,r);a.push({token:i,amount:(0,p.gB)(n.toString(),i.tokenDecimal)}),t.push(i.icon?(0,y.jsx)("img",{src:i.icon,className:d().icon},s):(0,y.jsx)(k.Z,{tokenId:s},s))}));var i=(0,p.B2)(a);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:d().icon_wrap,children:t}),(0,y.jsx)("div",{children:(0,y.jsx)(f.Z,{value:i,prefix:"$",useAbbr:!0})})]})}},{title:(0,y.jsxs)(y.Fragment,{children:[(0,c.Z)("risk_factor"),(0,y.jsx)("br",{}),(0,c.Z)("liq_rf")]}),dataIndex:"liq",key:"liq",align:"right",render:(e,n)=>{var s=n.positions,a=n.userDebt,t=s.collaterals,i=new Z.Z(0);t.forEach((e=>{var n=e.token,s=e.amount,a=(0,p.xD)(n,r),t=a.userBorrowPrice,l=a.assets,o=a.tokenDecimal,d=(0,p.gB)(s.toString(),o);i=i.plus(new Z.Z(d).multipliedBy(t).multipliedBy(l.collateralCredit))})),i=parseFloat(a)<=0?i.gt(0)?new Z.Z(1/0):new Z.Z(0):i.div(a).div(n.userBorrowPrice).div(n.assets.borrowCredit);var l="#00A980";return i.lte(1.05)?l="#EB5757":i.lte(1.1)&&(l=" #F2994A"),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{style:{color:l},children:i.toFixed(2)}),(0,y.jsx)("br",{}),"1.00"]})}}];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.Z,{columns:a?z:K,dataSource:A,className:d().table,rowKey:"id",loading:{spinning:x,indicator:(0,y.jsx)(w.Z,{spin:!0,style:{fontSize:30}})}}),q>-1&&(0,y.jsx)(g.Z,{showPanelIndex:q,setShowPanelIndex:R,currentToken:B})]})}var F=e=>{var n=e.tokens,s=e.wallet;return(0,i.Z)((0,i.Z)({},n),s)},B=(0,_.$j)(F)(I);function S(e){var n=e.list,s=e.loading,a=(0,_.I0)(),t=(0,u.useState)([]),r=(0,l.Z)(t,2),i=r[0],o=r[1];(0,u.useEffect)((()=>{n&&n.length>0&&o(n.filter((e=>parseFloat(e.userTokenBalance)>0)))}),[n]);var x=[{title:(0,c.Z)("asset"),dataIndex:"asset",key:"asset",align:"left",render:(e,n)=>{var s=n.icon,a=n.symbol,t=n.fullName,r=n.tokenId;return(0,y.jsx)("div",{className:d().token,children:(0,y.jsxs)("div",{className:d().info,children:[(0,y.jsx)("div",{className:d().icon_wrap,children:s?(0,y.jsx)("img",{src:s,className:d().icon}):(0,y.jsx)(k.Z,{tokenId:r})}),(0,y.jsxs)("div",{className:d().title,children:[(0,y.jsx)("div",{className:d().symbol,children:a}),(0,y.jsx)("div",{className:d().full_name,children:t})]})]})})}},{title:(0,c.Z)("balance"),dataIndex:"balance",key:"balance",align:"right",render:(e,n)=>{var s=n.userTokenBalance,a=n.symbol,t=(0,p.B2)([{amount:s,token:n}]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(f.Z,{value:s,useAbbr:!0,suffix:a})}),(0,y.jsx)("div",{className:d().desc,children:(0,y.jsx)(f.Z,{value:t,prefix:"$",useAbbr:!0})})]})}},{title:"-",dataIndex:"swap",key:"swap",align:"center",render:(e,n)=>{var s=n.tokenId;return(0,y.jsx)("div",{className:d().action,onClick:()=>{a({type:"tokens/save",payload:{swapTokenId:s}}),_.m8.push("/trade")},children:(0,c.Z)("swap")})}}];return(0,y.jsx)(m.Z,{columns:x,dataSource:i,className:d().table,rowKey:"id",loading:{spinning:s,indicator:(0,y.jsx)(w.Z,{spin:!0,style:{fontSize:30}})}})}var D=S,C=s(94530),A=(s(71194),s(37079)),P=s(21512),L=s(89544);function T(e){var n=e.visible,s=e.setVisible,a=e.setShowLiuidityPanelIndex,r=e.token,i=r.userOsd,l=r.userReserve,o=r.symbol,d=r.userLpSupply,u=r.icon,_=r.tokenId,x=r.fullName,m=r.userLpBalance,h=r.osdTokenData,v=r.tokenDecimal,j=r.userTokenDebt,g=u?(0,y.jsx)("img",{src:u,className:t().icon}):(0,y.jsx)(k.Z,{tokenId:_}),b=parseFloat(d)>0?new Z.Z(m).div(d):new Z.Z(0),w=(0,p.B2)([{amount:new Z.Z(l).plus(j).toFixed(v),token:r},{amount:i,token:h}]),N=b.multipliedBy(w).toFixed(2);return(0,y.jsx)(A.Z,{width:890,footer:null,visible:n,getContainer:()=>document.getElementById("J_Page")||document.body,onCancel:()=>s(!1),closable:!1,wrapClassName:t().modal,children:(0,y.jsxs)("div",{className:t().container,children:[(0,y.jsxs)("div",{className:t().token,children:[(0,y.jsxs)("div",{className:t().icon_wrap,children:[g,(0,y.jsx)("img",{src:L.qQ,className:t().icon_osd})]}),(0,y.jsxs)("div",{className:t().title,children:[(0,y.jsx)("div",{className:t().symbol,children:o}),(0,y.jsx)("div",{className:t().full_name,children:x})]})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(f.Z,{value:(0,p.FH)(l,2),useAbbr:!0})," ",o]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(f.Z,{value:(0,p.FH)(i,2),useAbbr:!0})," ",h.symbol]})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{children:[m," ",o," LP | ",b.multipliedBy(100).toFixed(2),"%"]}),(0,y.jsx)("div",{children:(0,y.jsx)(f.Z,{value:N,useAbbr:!0,prefix:"$"})})]}),(0,y.jsxs)("div",{className:t().btns_wrap,children:[(0,y.jsx)(P.Z,{onClick:()=>a(1),className:t().btn,height:"48",children:(0,c.Z)("remove_liquidity")}),(0,y.jsx)(P.Z,{onClick:()=>a(0),className:t().btn,height:"48",children:(0,c.Z)("add_liquidity")})]})]})})}var q=e=>{var n=e.tokens,s=e.wallet;return(0,i.Z)((0,i.Z)({},n),s)},R=(0,_.$j)(q)(T),E=(0,p.l$)(),$="iPhone"===E||"Android"===E;function K(e){var n=e.list,s=e.loading,a=e.osdTokenData,t=e.isLogin,r=e.dataSourceChainId,i=e.walletChainId,o=(0,u.useState)([]),_=(0,l.Z)(o,2),x=_[0],j=_[1],g=(0,u.useState)(-1),b=(0,l.Z)(g,2),N=b[0],I=b[1],F=(0,u.useState)(!1),B=(0,l.Z)(F,2),S=B[0],D=B[1],A=(0,u.useState)({}),P=(0,l.Z)(A,2),T=P[0],q=P[1],E=t&&r===i;(0,u.useEffect)((()=>{n&&n.length>0&&j(n.filter((e=>parseFloat(e.userLpBalance)>0)))}),[n]);var K=function(){var e=(0,v.Z)((0,h.Z)().mark((function e(n,s){return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:q(s),I(n);case 2:case"end":return e.stop()}}),e)})));return function(n,s){return e.apply(this,arguments)}}(),z=[{title:(0,c.Z)("pool"),dataIndex:"pool",key:"pool",align:"left",render:(e,n)=>{var s=n.icon,a=n.symbol,t=n.fullName,r=n.tokenId;return(0,y.jsx)("div",{className:d().token,children:(0,y.jsxs)("div",{className:d().info,children:[(0,y.jsxs)("div",{className:d().icon_wrap,children:[s?(0,y.jsx)("img",{src:s,className:d().icon}):(0,y.jsx)(k.Z,{tokenId:r}),(0,y.jsx)("img",{src:L.qQ,className:d().icon_osd})]}),(0,y.jsxs)("div",{className:d().title,children:[(0,y.jsx)("div",{className:d().symbol,children:a}),(0,y.jsx)("div",{className:d().full_name,children:t})]})]})})}},{title:(0,c.Z)("pool_size"),dataIndex:"size",key:"poolInfo",align:"right",render:(e,n)=>{var s=n.userOsd,t=n.userReserve;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(f.Z,{value:(0,p.FH)(t,2),useAbbr:!0})," ",n.symbol]}),(0,y.jsxs)("div",{className:d().line,children:[(0,y.jsx)(f.Z,{value:(0,p.FH)(s,2),useAbbr:!0})," ",a.symbol]})]})}},{title:(0,y.jsxs)(y.Fragment,{children:["LP | ",(0,c.Z)("increased_pool"),(0,y.jsx)("br",{}),(0,c.Z)("value")]}),dataIndex:"lp",key:"lp",align:"right",render:(e,n)=>{var s=n.userLpBalance,t=n.userLpSupply,r=n.symbol,i=n.userReserve,l=n.userOsd,o=n.userTokenDebt,c=n.tokenDecimal,u=parseFloat(t)>0?new Z.Z(s).div(t):new Z.Z(0),_=(0,p.B2)([{amount:new Z.Z(i).plus(o).toFixed(c),token:n},{amount:l,token:a}]),x=u.multipliedBy(_).toFixed(2);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{children:[s," ",r," LP | ",u.multipliedBy(100).toFixed(2),"%"]}),(0,y.jsx)("div",{className:d().line,children:(0,y.jsx)(f.Z,{value:x,useAbbr:!0,prefix:"$"})})]})}}],H=[...z,{title:(0,c.Z)("manage_liq"),dataIndex:"manage",key:"manage",align:"center",render:(e,n)=>(0,y.jsxs)("div",{className:d().action,children:[(0,y.jsx)("div",{onClick:()=>K(0,n),children:(0,c.Z)("add")}),(0,y.jsx)("div",{onClick:()=>K(1,n),style:{marginLeft:20},children:(0,c.Z)("withdraw")})]})}];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.Z,{columns:$?z:H,dataSource:x,className:d().table,rowKey:"id",loading:{spinning:s,indicator:(0,y.jsx)(w.Z,{spin:!0,style:{fontSize:30}})}}),N>-1&&(0,y.jsx)(C.Z,{showPanelIndex:N,setShowPanelIndex:I,currentToken:T}),S&&E&&(0,y.jsx)(R,{token:T,visible:S,setVisible:D,setShowLiuidityPanelIndex:e=>{D(!1),I(e)}})]})}var z=K;function H(e){var n=e.tokenDatas,s=e.osdTokenData,a=e.loadingData,t=(0,u.useState)([]),r=(0,l.Z)(t,2),i=r[0],o=r[1],_=(0,u.useState)(0),m=(0,l.Z)(_,2),h=m[0],v=m[1];(0,u.useEffect)((()=>{o(n)}),[n]);var p=n&&n.length<1||a;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:d().layer_top,children:[(0,y.jsx)("div",{className:d().menu,children:["wallet_balance","pool_deposits","borrow_positions"].map(((e,n)=>(0,y.jsx)("div",{className:n===h?"".concat(d().menu_item," ").concat(d().menu_current_item):d().menu_item,onClick:()=>v(n),children:(0,c.Z)(e)},e)))}),(0,y.jsx)("div",{className:d().search_wrap,children:(0,y.jsx)(x.Z,{changeShowList:o,className:"search_input",placeholder:(0,c.Z)("search_tips")})})]}),0===h&&(0,y.jsx)(D,{list:i,loading:p}),1===h&&(0,y.jsx)(z,{list:i,loading:p,osdTokenData:s}),2===h&&(0,y.jsx)(B,{list:i,loading:p})]})}var Q=e=>{var n=e.tokens,s=e.wallet,a=e.loading,t=a.effects;return(0,i.Z)((0,i.Z)((0,i.Z)({},n),s),{},{loadingData:t["tokens/getData"]||!1})},G=(0,_.$j)(Q)(H);function O(){return(0,y.jsx)(r.Z,{children:(0,y.jsx)("div",{className:t().container,children:(0,y.jsx)(G,{})})})}var V=O}}]);